{
	"app-id": "com.moonlight_stream.Moonlight",
	"runtime": "org.kde.Platform",
	"runtime-version": "5.12",
	"sdk": "org.kde.Sdk",
	"command": "moonlight",
	"rename-icon": "moonlight",
	"finish-args": [
		"--share=network",
		"--socket=x11",
		"--socket=wayland",
		"--share=ipc",
		"--socket=pulseaudio",
		"--device=all",
		"--env=LIBVA_DRIVER_NAME=",
		"--env=LIBVA_DRIVERS_PATH="
	],
	"cleanup": [ "/include", "*.a", "/share/ffmpeg" ],
	"modules": [
		{
			"name": "ffnvcodec",
			"no-autogen": true,
			"make-install-args": [
				"PREFIX=/app"
			],
			"sources": [
				{
					"type": "git",
					"url": "https://git.videolan.org/git/ffmpeg/nv-codec-headers.git",
					"tag": "n9.0.18.1",
					"commit": "5eeca8cc95267d55030e98a051effa47c45f13f3"
				}
			]
		},
		{
			"name": "ffmpeg",
			"config-opts": [
				"--enable-pic",
				"--enable-static",
				"--disable-shared",
				"--disable-all",
				"--enable-avcodec",
				"--enable-nvdec",
				"--enable-decoder=h264",
				"--enable-decoder=hevc",
				"--enable-hwaccel=h264_vaapi",
				"--enable-hwaccel=hevc_vaapi",
				"--enable-hwaccel=h264_vdpau",
				"--enable-hwaccel=hevc_vdpau",
				"--enable-hwaccel=h264_nvdec",
				"--enable-hwaccel=hevc_nvdec"
			],
			"sources": [
				{
					"type": "archive",
					"url": "https://ffmpeg.org/releases/ffmpeg-4.1.3.tar.bz2",
					"sha256": "29a679685bd7bc29158110f367edf67b31b451f2176f9d79d0f342b9e22d6a2a"
				}
			]
		},
		{
			"name": "moonlight",
			"buildsystem": "qmake",
			"sources": [
				{
					"type": "git",
					"url": "https://github.com/moonlight-stream/moonlight-qt.git",
					"tag": "v1.0.1",
					"commit": "866e2f1762655ea87de0ba2de121042c62b56ebf"
				}
			]
		}
	]
}
